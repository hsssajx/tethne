

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>tethne.testsuite.networks_test &mdash; tethne  documentation</title>
    
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="tethne  documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">tethne  documentation</a> &raquo;</li>
          <li><a href="../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for tethne.testsuite.networks_test</h1><div class="highlight"><pre>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">To do: move testing of different types of attributes to writers testing</span>
<span class="sd">rather than graph testing; NetworkX can support any data structure as an</span>
<span class="sd">attribute but the graph file formats may not.</span>
<span class="sd">Copyright 2013 Aaron Baker</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">tethne.readers</span> <span class="kn">as</span> <span class="nn">rd</span>
<span class="kn">import</span> <span class="nn">tethne.networks</span> <span class="kn">as</span> <span class="nn">nt</span>
<span class="kn">import</span> <span class="nn">tethne.writers</span> <span class="kn">as</span> <span class="nn">wr</span>
<span class="kn">import</span> <span class="nn">tethne.utilities</span> <span class="kn">as</span> <span class="nn">util</span>
<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">import</span> <span class="nn">networkx</span> <span class="kn">as</span> <span class="nn">nx</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">os.path</span>

<div class="viewcode-block" id="TestCitationGraph"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestCitationGraph">[docs]</a><span class="k">class</span> <span class="nc">TestCitationGraph</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the citations, internal_citations networks (assuming the reader </span>
<span class="sd">        is functioning) by checking both &#39;citation&#39; and &#39;internal&#39; networks</span>
<span class="sd">        each with either &#39;doi&#39; or &#39;ayjid&#39; node_ids and either no</span>
<span class="sd">        node attributes or 4 node attributes of 4 different variable</span>
<span class="sd">        types</span>
<span class="sd">    The sparse data file networks are built on is //testin/wos_citations.txt</span>
<span class="sd">   &quot;&quot;&quot;</span>
<div class="viewcode-block" id="TestCitationGraph.setUp"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestCitationGraph.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">wos_data</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">parse_wos</span><span class="p">(</span><span class="s">&#39;./testin/wos_citations.txt&#39;</span><span class="p">)</span>
        <span class="n">meta_list</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">wos2meta</span><span class="p">(</span><span class="n">wos_data</span><span class="p">)</span>

        <span class="c"># ayjid with no attributes</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ayjid_citations</span><span class="p">,</span> 
         <span class="bp">self</span><span class="o">.</span><span class="n">ayjid_internal</span><span class="p">)</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">nx_citations</span><span class="p">(</span><span class="n">meta_list</span><span class="p">,</span> <span class="s">&#39;ayjid&#39;</span><span class="p">)</span>

        <span class="c"># doi with no attributes                                          </span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">doi_citations</span><span class="p">,</span> 
         <span class="bp">self</span><span class="o">.</span><span class="n">doi_internal</span><span class="p">)</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">nx_citations</span><span class="p">(</span><span class="n">meta_list</span><span class="p">,</span> <span class="s">&#39;doi&#39;</span><span class="p">)</span>

        <span class="c"># int, string, list, dict</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node_attribs</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="s">&#39;atitle&#39;</span><span class="p">,</span> <span class="s">&#39;aulast&#39;</span><span class="p">,</span> <span class="s">&#39;citations&#39;</span><span class="p">)</span>

        <span class="c"># ayjid with attribs </span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ayjid_cit_attrib</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">ayjid_int_attrib</span><span class="p">)</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">nx_citations</span><span class="p">(</span><span class="n">meta_list</span><span class="p">,</span>
                                                  <span class="s">&#39;ayjid&#39;</span><span class="p">,</span>
                                                  <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">node_attribs</span><span class="p">)</span>
        <span class="c"># doi with attribs</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">doi_cit_attrib</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">doi_int_attrib</span><span class="p">)</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">nx_citations</span><span class="p">(</span><span class="n">meta_list</span><span class="p">,</span>
                                                <span class="s">&#39;doi&#39;</span><span class="p">,</span>
                                                <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">node_attribs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestCitationGraph.test_ayjid"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestCitationGraph.test_ayjid">[docs]</a>    <span class="k">def</span> <span class="nf">test_ayjid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test of nx_citations with ayjid as node_id and no node attributes</span>

<span class="sd">        If fails, something is wrong with the construction of ayjid&#39;s</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># three papers in file each with author, year, journal information</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ayjid_internal</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>

        <span class="c"># ayjid of first paper&#39;s first reference does not match exactly</span>
        <span class="c"># with the ayjid of the second paper</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_edges</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ayjid_internal</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c"># since inexact match, 3 papers with 8 citations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ayjid_citations</span><span class="p">),</span> <span class="mi">11</span><span class="p">)</span>

        <span class="c"># one edge from paper to its citations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_edges</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ayjid_citations</span><span class="p">),</span> <span class="mi">8</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestCitationGraph.test_doi"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestCitationGraph.test_doi">[docs]</a>    <span class="k">def</span> <span class="nf">test_doi</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test of nx_citations with doi as node_id and no node attributes</span>

<span class="sd">        If fails, something is wrong with the parsing of WOS files at</span>
<span class="sd">        either the DI field tag for papers or the DOI number in the CR</span>
<span class="sd">        field tag</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># three papers in file, each with DI(=DOI) field tags</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">doi_internal</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>

        <span class="c"># DOI does match exactly: first paper references second paper</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_edges</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">doi_internal</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c"># only 7 of the papers/references have DOI numbers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">doi_citations</span><span class="p">),</span> <span class="mi">7</span><span class="p">)</span>

        <span class="c"># first paper has edges to its 3 citations, second has one to its</span>
        <span class="c"># and third has one</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_edges</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">doi_citations</span><span class="p">),</span> <span class="mi">5</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestCitationGraph.test_node_attribs"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestCitationGraph.test_node_attribs">[docs]</a>    <span class="k">def</span> <span class="nf">test_node_attribs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test adding of node attributes to 4 graphs: ayjid no attribs, ayjid</span>
<span class="sd">            with attribs, doi no attribs, and doi with attribs</span>

<span class="sd">        If fails, something is wrong with the assigning of node attributes</span>
<span class="sd">        from a meta_dict in the citations networks</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># check that the attributes got added to each node</span>
        <span class="n">graphs</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ayjid_cit_attrib</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ayjid_int_attrib</span><span class="p">,</span>
                  <span class="bp">self</span><span class="o">.</span><span class="n">doi_cit_attrib</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">doi_int_attrib</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">graph</span> <span class="ow">in</span> <span class="n">graphs</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">():</span>
                <span class="n">node_attribs</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">graph</span><span class="o">.</span><span class="n">node</span><span class="p">[</span><span class="n">node</span><span class="p">])</span>
                <span class="n">check_attribs</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_attribs</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">node_attribs</span><span class="p">,</span> <span class="n">check_attribs</span><span class="p">)</span>
        </div>
<div class="viewcode-block" id="TestCitationGraph.test_edge_attribs"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestCitationGraph.test_edge_attribs">[docs]</a>    <span class="k">def</span> <span class="nf">test_edge_attribs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test adding of edge attributes indicating what date a paper is cited</span>

<span class="sd">        If fails, something is wrong with assigning the edge attribute from a</span>
<span class="sd">        paper to its citation indicating the date of citation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># attributes of first paper citing its first reference</span>
        <span class="n">edge_attribs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">doi_citations</span><span class="o">.</span><span class="n">edge</span><span class="p">[</span><span class="s">&#39;10.1007/s10646-013-1042-4&#39;</span><span class="p">][</span><span class="s">&#39;10.1577/1548-8659(1993)122&lt;0063:AQHAIF&gt;2.3.CO;2&#39;</span><span class="p">]</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="n">edge_attribs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="n">keys</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">edge_attribs</span><span class="p">[</span><span class="s">&#39;date&#39;</span><span class="p">],</span> <span class="mi">2013</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestCitationGraph.test_no_edge_attrib"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestCitationGraph.test_no_edge_attrib">[docs]</a>    <span class="k">def</span> <span class="nf">test_no_edge_attrib</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test adding of edge attributes when citating paper&#39;s date is missing</span>

<span class="sd">        If the publication date is unknown (that is, PY field tag is missing</span>
<span class="sd">        from the WOS data file), the edge_attribute has value None; if</span>
<span class="sd">        fails that assumption is wrong</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># attributes of third paper citing its only reference, PY=date key</span>
        <span class="c"># missing</span>
        <span class="n">edge_attribs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">doi_citations</span><span class="o">.</span><span class="n">edge</span><span class="p">[</span><span class="s">&#39;10.1016/j.ecolind.2011.07.024&#39;</span><span class="p">][</span><span class="s">&#39;10.1016/j.ecss.2008.08.010&#39;</span><span class="p">]</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="n">edge_attribs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="n">keys</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">edge_attribs</span><span class="p">[</span><span class="s">&#39;date&#39;</span><span class="p">],</span> <span class="bp">None</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestCitationGraph.tearDown"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestCitationGraph.tearDown">[docs]</a>    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</div></div>
<div class="viewcode-block" id="TestAuthorPapersGraph"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestAuthorPapersGraph">[docs]</a><span class="k">class</span> <span class="nc">TestAuthorPapersGraph</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the author_papers network</span>
<span class="sd">    Assumes reader is functioning</span>

<span class="sd">    The test file ./testin/wos_authors.txt contains two papers in WoS field tag</span>
<span class="sd">    format that are from the same author. One is fully capitalized and the</span>
<span class="sd">    other is not.</span>

<span class="sd">    We also test multiple authors and their link to the same paper</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="TestAuthorPapersGraph.setUp"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestAuthorPapersGraph.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">wos_data</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">parse_wos</span><span class="p">(</span><span class="s">&#39;./testin/wos_authors.txt&#39;</span><span class="p">)</span>
        <span class="n">meta_list</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">wos2meta</span><span class="p">(</span><span class="n">wos_data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">no_attribs</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">nx_author_papers</span><span class="p">(</span><span class="n">meta_list</span><span class="p">,</span> <span class="s">&#39;doi&#39;</span><span class="p">)</span>

        <span class="c"># int, string, list, dict</span>
        <span class="n">node_attribs</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="s">&#39;atitle&#39;</span><span class="p">,</span> <span class="s">&#39;aulast&#39;</span><span class="p">,</span> <span class="s">&#39;citations&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node_attribs</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">nx_author_papers</span><span class="p">(</span><span class="n">meta_list</span><span class="p">,</span> <span class="s">&#39;doi&#39;</span><span class="p">,</span>
                                                <span class="o">*</span><span class="n">node_attribs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAuthorPapersGraph.test_case_sensitivity"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestAuthorPapersGraph.test_case_sensitivity">[docs]</a>    <span class="k">def</span> <span class="nf">test_case_sensitivity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fails if case sensitivity of author names matters</span>
<span class="sd">        This is particularly relevant for author_papers network because</span>
<span class="sd">        a string identifier is all we have to identify authors</span>

<span class="sd">        more of a reader test case</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">person_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_attribs</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_attribs</span><span class="o">.</span><span class="n">node</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;person&#39;</span><span class="p">:</span>
                <span class="n">person_count</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">person_count</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAuthorPapersGraph.test_no_attribs"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestAuthorPapersGraph.test_no_attribs">[docs]</a>    <span class="k">def</span> <span class="nf">test_no_attribs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># 2 authors; 2 papers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">no_attribs</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>

        <span class="c"># ADAMS has 2 papers, MCLEAN has 1 paper</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_edges</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">no_attribs</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>

        <span class="c"># each node minimally has the type attribute distinguishing</span>
        <span class="c"># paper nodes from person nodes</span>
        <span class="n">expected_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_attribs</span><span class="o">.</span><span class="n">nodes</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
            <span class="n">node_attribs</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">obtained_keys</span> <span class="o">=</span> <span class="n">node_attribs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected_keys</span><span class="p">,</span> <span class="n">obtained_keys</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAuthorPapersGraph.test_node_attribs"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestAuthorPapersGraph.test_node_attribs">[docs]</a>    <span class="k">def</span> <span class="nf">test_node_attribs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># 2 authors; 2 papers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">no_attribs</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>

        <span class="c"># ADAMS has 2 papers, MCLEAN has 1 paper</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_edges</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">no_attribs</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>

        <span class="c"># 2 edges from author Adams S to his 2 papers</span>
        <span class="c"># the following information is pulled from the test WoS file</span>
        <span class="n">paper1_node_id</span> <span class="o">=</span> <span class="s">&#39;10.1577/1548-8659(1993)122&lt;0063:AQHAIF&gt;2.3.CO;2&#39;</span>

        <span class="c"># paper 1 node attributes</span>
        <span class="n">atitle1</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">aulast1</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;ADAMS&#39;</span><span class="p">]</span>
        <span class="n">date1</span> <span class="o">=</span> <span class="mi">1993</span>
        <span class="n">cr1_list</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Adams S. M., 1990, AM FISHERIES SOC S&#39;</span><span class="p">,</span>
                    <span class="p">(</span><span class="s">&#39;ADAMS SM, 1985, J FISH BIOL, V26, P111,&#39;</span> <span class="o">+</span> 
                        <span class="s">&#39;DOI 10.1111/j.1095-8649.1985.tb04248.x&#39;</span><span class="p">),</span>
                    <span class="s">&#39;ADAMS SM, 1992, ECOTOX ENVIRON SAFE, V24, P347&#39;</span><span class="p">,</span>
                    <span class="s">&#39;Adams SM, 1990, AM FISHERIES SOC S, V8, P1&#39;</span><span class="p">]</span>
        <span class="n">citations1</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">cite</span> <span class="ow">in</span> <span class="n">cr1_list</span><span class="p">:</span>
            <span class="n">cite_dict</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">parse_cr</span><span class="p">(</span><span class="n">cite</span><span class="p">)</span>
            <span class="n">citations1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cite_dict</span><span class="p">)</span>

        <span class="c"># and those attributes in the expected form: a &#39;primitive&#39; dictionary</span>
        <span class="n">paper1_expected_attribs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;atitle&#39;</span><span class="p">:</span><span class="n">atitle1</span><span class="p">,</span>
                                   <span class="s">&#39;aulast&#39;</span><span class="p">:</span><span class="n">aulast1</span><span class="p">,</span>
                                   <span class="s">&#39;date&#39;</span><span class="p">:</span><span class="n">date1</span><span class="p">,</span>
                                   <span class="s">&#39;citations&#39;</span><span class="p">:</span><span class="n">citations1</span><span class="p">,</span>
                                   <span class="s">&#39;type&#39;</span><span class="p">:</span><span class="s">&#39;paper&#39;</span><span class="p">}</span>
        <span class="n">paper1_expected_keys</span> <span class="o">=</span> <span class="n">paper1_expected_attribs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="n">paper1_expected_attribs</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">subdict</span><span class="p">(</span><span class="n">paper1_expected_attribs</span><span class="p">,</span> 
                                                      <span class="n">paper1_expected_keys</span><span class="p">)</span>

        <span class="c"># and for paper 2 nodes (note ADAMS S is an author for both papers)</span>
        <span class="n">paper2_node_id</span> <span class="o">=</span> <span class="s">&#39;10.1111/j.1095-8649.1985.tb04248.x&#39;</span>

        <span class="c"># and paper 2 node attributes</span>
        <span class="n">atitle2</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">aulast2</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Adams&#39;</span><span class="p">,</span> <span class="s">&#39;MCLEAN&#39;</span><span class="p">]</span>
        <span class="n">date2</span> <span class="o">=</span> <span class="mi">1985</span>
        <span class="n">cr2_list</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;CR ADAMS SM, 1982, CAN J FISH AQUAT SCI, V39,&#39;</span> <span class="o">+</span> 
                        <span class="s">&#39;P1175, DOI 10.1139/f82-155&#39;</span><span class="p">),</span>
                    <span class="p">(</span><span class="s">&#39;ADAMS SM, 1982, T AM FISH SOC, V111, P549,&#39;</span> <span class="o">+</span> 
                        <span class="s">&#39;DOI 10.1577/1548-8659(1982)111&lt;549:EPILBU&gt;2.0.CO;2&#39;</span><span class="p">),</span>
                    <span class="p">(</span><span class="s">&#39;ALLEN JRM, 1982, J FISH BIOL, V21, P537,&#39;</span> <span class="o">+</span> 
                        <span class="s">&#39;DOI 10.1111/j.1095-8649.1982.tb02858.x&#39;</span><span class="p">)]</span>
        <span class="n">citations2</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">cite</span> <span class="ow">in</span> <span class="n">cr2_list</span><span class="p">:</span>
            <span class="n">cite_dict</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">parse_cr</span><span class="p">(</span><span class="n">cite</span><span class="p">)</span>
            <span class="n">citations2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cite_dict</span><span class="p">)</span>

        <span class="c"># and those attributes in the expected form: a &#39;primitive&#39; dictionary</span>
        <span class="n">paper2_expected_attribs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;atitle&#39;</span><span class="p">:</span><span class="n">atitle2</span><span class="p">,</span>
                                   <span class="s">&#39;aulast&#39;</span><span class="p">:</span><span class="n">aulast2</span><span class="p">,</span>
                                   <span class="s">&#39;date&#39;</span><span class="p">:</span><span class="n">date2</span><span class="p">,</span>
                                   <span class="s">&#39;citations&#39;</span><span class="p">:</span><span class="n">citations2</span><span class="p">,</span>
                                   <span class="s">&#39;type&#39;</span><span class="p">:</span><span class="s">&#39;paper&#39;</span><span class="p">}</span>
        <span class="n">paper2_expected_keys</span> <span class="o">=</span> <span class="n">paper2_expected_attribs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="n">paper2_expected_attribs</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">subdict</span><span class="p">(</span><span class="n">paper2_expected_attribs</span><span class="p">,</span> 
                                                      <span class="n">paper2_expected_keys</span><span class="p">)</span>



        <span class="c"># verify the contents of paper 1</span>
        <span class="n">paper1_obtained_attribs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_attribs</span><span class="o">.</span><span class="n">node</span><span class="p">[</span><span class="n">paper1_node_id</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertItemsEqual</span><span class="p">(</span><span class="n">paper1_expected_attribs</span><span class="p">,</span> 
                              <span class="n">paper1_obtained_attribs</span><span class="p">)</span>

        <span class="c"># and paper 2</span>
        <span class="n">paper2_obtained_attribs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_attribs</span><span class="o">.</span><span class="n">node</span><span class="p">[</span><span class="n">paper2_node_id</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertItemsEqual</span><span class="p">(</span><span class="n">paper2_expected_attribs</span><span class="p">,</span> 
                              <span class="n">paper2_obtained_attribs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAuthorPapersGraph.tearDown"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestAuthorPapersGraph.tearDown">[docs]</a>    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

</div></div>
<div class="viewcode-block" id="TestCoauthorsGraph"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestCoauthorsGraph">[docs]</a><span class="k">class</span> <span class="nc">TestCoauthorsGraph</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the coauthors network, assumes reader is functioning</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="TestCoauthorsGraph.setUp"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestCoauthorsGraph.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c">#read data from docs folder</span>
        <span class="n">wos_data</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">parse_wos</span><span class="p">(</span><span class="s">&#39;./testin/wos_coauthors.txt&#39;</span><span class="p">)</span>
        <span class="n">meta_list</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">wos2meta</span><span class="p">(</span><span class="n">wos_data</span><span class="p">)</span>

        <span class="c"># test network built from meta_list with no edge attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">no_attribs</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">nx_coauthors</span><span class="p">(</span><span class="n">meta_list</span><span class="p">)</span>

        <span class="c"># test network built from meta_list with optional edge attributes</span>
        <span class="c"># attributes of type str, int, list, dict</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attribs</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;atitle&#39;</span><span class="p">,</span> <span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="s">&#39;aulast&#39;</span><span class="p">,</span> <span class="s">&#39;citations&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">edge_attribs</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">nx_coauthors</span><span class="p">(</span><span class="n">meta_list</span><span class="p">,</span> <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">attribs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestCoauthorsGraph.test_graph_structure"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestCoauthorsGraph.test_graph_structure">[docs]</a>    <span class="k">def</span> <span class="nf">test_graph_structure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># test for number of nodes and edges</span>
        <span class="c"># viewing the input file we see 2 papers, one with 6 authors and</span>
        <span class="c"># another with 4 but Cajaraville is a common author</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">no_attribs</span><span class="p">),</span> <span class="mi">9</span><span class="p">)</span>

        <span class="c"># 6 choose 2 + 4 choose 2 = 21 edges</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_edges</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">no_attribs</span><span class="p">),</span> <span class="mi">21</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestCoauthorsGraph.test_no_attribs"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestCoauthorsGraph.test_no_attribs">[docs]</a>    <span class="k">def</span> <span class="nf">test_no_attribs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># test to ensure no edge attributes in the no_attribs graph</span>
        <span class="n">expected_attribs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_attribs</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
            <span class="n">obtained_attribs</span> <span class="o">=</span> <span class="n">edge</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertItemsEqual</span><span class="p">(</span><span class="n">expected_attribs</span><span class="p">,</span> <span class="n">obtained_attribs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestCoauthorsGraph.test_edge_attribs"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestCoauthorsGraph.test_edge_attribs">[docs]</a>    <span class="k">def</span> <span class="nf">test_edge_attribs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># test to ensure proper edge attributes in the edge_attribs graph</span>
        <span class="c"># the following data is obtained from the input file for the</span>
        <span class="c"># attribs specified in the setUp step: atitle, date, aulast, citations</span>
        <span class="c"># note the wos2meta function runs upper() on names</span>
        <span class="n">paper1_name_list</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Marigomez I&#39;</span><span class="p">,</span> <span class="s">&#39;Garmendia L&#39;</span><span class="p">,</span> <span class="s">&#39;Soto M&#39;</span><span class="p">,</span> <span class="s">&#39;Orbea A&#39;</span><span class="p">,</span>
                            <span class="s">&#39;Izagirre U&#39;</span><span class="p">,</span> <span class="s">&#39;Cajaraville M&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">paper1_name_list</span><span class="p">)):</span>
            <span class="n">paper1_name_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">paper1_name_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="n">paper1_atitle</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;TI Marine ecosystem health status assessment&#39;</span> <span class="o">+</span>
                         <span class="s">&#39;through integrative biomarker indices: a&#39;</span> <span class="o">+</span> 
                         <span class="s">&#39;comparative study after the Prestige oil&#39;</span> <span class="o">+</span> 
                         <span class="s">&#39;spill &quot;Mussel Watch&quot;&#39;</span><span class="p">)</span>
        <span class="n">paper1_date</span> <span class="o">=</span> <span class="mi">2013</span>
        <span class="n">paper1_aulast</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Marigomez&#39;</span><span class="p">,</span> <span class="s">&#39;Garmendia&#39;</span><span class="p">,</span> <span class="s">&#39;Soto&#39;</span><span class="p">,</span> <span class="s">&#39;Orbea&#39;</span><span class="p">]</span> 
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">paper1_aulast</span><span class="p">)):</span>
            <span class="n">paper1_aulast</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">paper1_aulast</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">paper1_cr_list</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;ADAMS SM, 1993, T AM FISH SOC, V122, P63,&#39;</span> <span class="o">+</span>
                           <span class="s">&#39;DOI 10.1577/1548-8659(1993)122&lt;0063:AQHAIF&gt;&#39;</span> <span class="o">+</span> 
                           <span class="s">&#39;2.3.CO;2&#39;</span><span class="p">),</span>
                          <span class="p">(</span><span class="s">&#39;Beliaeff B, 2002, ENVIRON TOXICOL CHEM, V21,&#39;</span> <span class="o">+</span>
                           <span class="s">&#39;P1316, DOI 10.1897/1551-5028(2002)021&#39;</span> <span class="o">+</span>
                           <span class="s">&#39;&lt;1316:IBRAUT&gt;2.0.CO;2&#39;</span><span class="p">)]</span>
        <span class="n">paper1_citations</span> <span class="o">=</span>  <span class="p">[]</span>
        <span class="k">for</span> <span class="n">cite</span> <span class="ow">in</span> <span class="n">paper1_cr_list</span><span class="p">:</span>
            <span class="n">paper1_citations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rd</span><span class="o">.</span><span class="n">parse_cr</span><span class="p">(</span><span class="n">cite</span><span class="p">))</span>

        <span class="c"># put the above data in the form that it is processed in Tethne</span>
        <span class="n">paper1_expected_attribs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;atitle&#39;</span><span class="p">:</span><span class="n">paper1_atitle</span><span class="p">,</span>
                                   <span class="s">&#39;date&#39;</span><span class="p">:</span><span class="n">paper1_date</span><span class="p">,</span>
                                   <span class="s">&#39;aulast&#39;</span><span class="p">:</span><span class="n">paper1_aulast</span><span class="p">,</span>
                                   <span class="s">&#39;citations&#39;</span><span class="p">:</span><span class="n">paper1_citations</span><span class="p">}</span>
        <span class="n">paper1_expected_attribs</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">subdict</span><span class="p">(</span><span class="n">paper1_expected_attribs</span><span class="p">,</span>
                                                      <span class="bp">self</span><span class="o">.</span><span class="n">attribs</span><span class="p">)</span>

        <span class="c"># do the same for the second paper in the document</span>
        <span class="n">paper2_name_list</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Han D&#39;</span><span class="p">,</span> <span class="s">&#39;Tong X&#39;</span><span class="p">,</span> <span class="s">&#39;Jin M&#39;</span><span class="p">,</span> <span class="s">&#39;Cajaraville M&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">paper2_name_list</span><span class="p">)):</span>
            <span class="n">paper2_name_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">paper2_name_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">paper2_atitle</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Evaluation of organic contamination in urban&#39;</span> <span class="o">+</span> 
                         <span class="s">&#39;groundwater surrounding a municipal landfill,&#39;</span> <span class="o">+</span> 
                         <span class="s">&#39;Zhoukou, China&#39;</span><span class="p">)</span>
        <span class="n">paper2_date</span> <span class="o">=</span> <span class="mi">2013</span>
        <span class="n">paper2_aulast</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Han&#39;</span><span class="p">,</span> <span class="s">&#39;Tong&#39;</span><span class="p">,</span> <span class="s">&#39;Jin&#39;</span><span class="p">,</span> <span class="s">&#39;Cajaraville&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">paper2_aulast</span><span class="p">)):</span>
            <span class="n">paper2_aulast</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">paper2_aulast</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">paper2_cr_list</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;Akyuz M, 2010, SCI TOTAL ENVIRON, V408, P5550,&#39;</span> <span class="o">+</span> 
                           <span class="s">&#39;DOI 10.1016/j.scitotenv.2010.07.063&#39;</span><span class="p">),</span>
                          <span class="p">(</span><span class="s">&#39;APHA, 1992, STAND METH EX WAT WA&#39;</span><span class="p">),</span>
                          <span class="p">(</span><span class="s">&#39;Basberg L, 1998, AQUAT GEOCHEM, V4, P253,&#39;</span> <span class="o">+</span> 
                           <span class="s">&#39;DOI 10.1023/A:1009623205558&#39;</span><span class="p">)]</span>
        <span class="n">paper2_citations</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">cite</span> <span class="ow">in</span> <span class="n">paper2_cr_list</span><span class="p">:</span>
            <span class="n">paper2_citations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rd</span><span class="o">.</span><span class="n">parse_cr</span><span class="p">(</span><span class="n">cite</span><span class="p">))</span>

        <span class="c"># and again put it in the expected form in Tethne</span>
        <span class="n">paper2_expected_attribs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;atitle&#39;</span><span class="p">:</span><span class="n">paper2_atitle</span><span class="p">,</span>
                                   <span class="s">&#39;date&#39;</span><span class="p">:</span><span class="n">paper2_date</span><span class="p">,</span>
                                   <span class="s">&#39;aulast&#39;</span><span class="p">:</span><span class="n">paper2_aulast</span><span class="p">,</span>
                                   <span class="s">&#39;citations&#39;</span><span class="p">:</span><span class="n">paper2_citations</span><span class="p">}</span>
        <span class="n">paper2_expected_attribs</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">subdict</span><span class="p">(</span><span class="n">paper2_expected_attribs</span><span class="p">,</span>
                                                      <span class="bp">self</span><span class="o">.</span><span class="n">attribs</span><span class="p">)</span>

        <span class="c"># test the actual edge attributes in the graph</span>
        <span class="k">for</span> <span class="n">name_index_1</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">paper1_name_list</span><span class="p">)):</span>
            <span class="n">name1</span> <span class="o">=</span> <span class="n">paper1_name_list</span><span class="p">[</span><span class="n">name_index_1</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">name_index_2</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">name_index_1</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">paper1_name_list</span><span class="p">)):</span>
                <span class="n">name2</span> <span class="o">=</span> <span class="n">paper1_name_list</span><span class="p">[</span><span class="n">name_index_2</span><span class="p">]</span>
                <span class="n">paper1_obtained_attribs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge_attribs</span><span class="o">.</span><span class="n">edge</span><span class="p">[</span><span class="n">name1</span><span class="p">]</span>\
                                                                <span class="p">[</span><span class="n">name2</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertItemsEqual</span><span class="p">(</span><span class="n">paper1_expected_attribs</span><span class="p">,</span>
                                      <span class="n">paper1_obtained_attribs</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">name_index_1</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">paper2_name_list</span><span class="p">)):</span>
            <span class="n">name1</span> <span class="o">=</span> <span class="n">paper2_name_list</span><span class="p">[</span><span class="n">name_index_1</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">name_index_2</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">name_index_1</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">paper2_name_list</span><span class="p">)):</span>
                <span class="n">name2</span> <span class="o">=</span> <span class="n">paper2_name_list</span><span class="p">[</span><span class="n">name_index_2</span><span class="p">]</span>
                <span class="n">paper2_obtained_attribs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge_attribs</span><span class="o">.</span><span class="n">edge</span><span class="p">[</span><span class="n">name1</span><span class="p">]</span>\
                                                                <span class="p">[</span><span class="n">name2</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertItemsEqual</span><span class="p">(</span><span class="n">paper2_expected_attribs</span><span class="p">,</span>
                                      <span class="n">paper2_obtained_attribs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestCoauthorsGraph.tearDown"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestCoauthorsGraph.tearDown">[docs]</a>    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

</div></div>
<div class="viewcode-block" id="TestBiblioGraph"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestBiblioGraph">[docs]</a><span class="k">class</span> <span class="nc">TestBiblioGraph</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the bibliographic_coupling network; assumes reader is functioning</span>

<span class="sd">    The viewer will note that the input file has 4 papers trimmed down</span>
<span class="sd">    and modified from the sample //docs/savedrecs.txt. </span>
<span class="sd">    </span>
<span class="sd">    The references</span>
<span class="sd">    were constructed so that the first paper shares two citations with the</span>
<span class="sd">    second paper, one (of the two shared between first and second) citation </span>
<span class="sd">    with the third paper, and zero citations with the fourth paper.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="TestBiblioGraph.setUp"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestBiblioGraph.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">wos_data</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">parse_wos</span><span class="p">(</span><span class="s">&#39;./testin/wos_biblio.txt&#39;</span><span class="p">)</span>
        <span class="n">wos_meta</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">wos2meta</span><span class="p">(</span><span class="n">wos_data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ayjid_zero</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">nx_biblio_coupling</span><span class="p">(</span><span class="n">wos_meta</span><span class="p">,</span> 
                                                 <span class="s">&#39;ayjid&#39;</span><span class="p">,</span>
                                                 <span class="mi">0</span><span class="p">,</span>
                                                 <span class="s">&#39;ayjid&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ayjid_one</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">nx_biblio_coupling</span><span class="p">(</span><span class="n">wos_meta</span><span class="p">,</span> 
                                               <span class="s">&#39;ayjid&#39;</span><span class="p">,</span>
                                               <span class="mi">1</span><span class="p">,</span>
                                               <span class="s">&#39;ayjid&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ayjid_two</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">nx_biblio_coupling</span><span class="p">(</span><span class="n">wos_meta</span><span class="p">,</span> 
                                               <span class="s">&#39;ayjid&#39;</span><span class="p">,</span>
                                               <span class="mi">2</span><span class="p">,</span>
                                               <span class="s">&#39;ayjid&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ayjid_attribs</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">nx_biblio_coupling</span><span class="p">(</span><span class="n">wos_meta</span><span class="p">,</span>
                                                   <span class="s">&#39;ayjid&#39;</span><span class="p">,</span>
                                                   <span class="mi">1</span><span class="p">,</span>
                                                   <span class="s">&#39;ayjid&#39;</span><span class="p">,</span>
                                                   <span class="s">&#39;atitle&#39;</span><span class="p">,</span>
                                                   <span class="s">&#39;aulast&#39;</span><span class="p">,</span>
                                                   <span class="s">&#39;date&#39;</span><span class="p">,</span>
                                                   <span class="s">&#39;citations&#39;</span><span class="p">)</span>

        <span class="c"># define a separate file for the missing citations test case</span>
        <span class="c"># with the same data as the other test file with the exception</span>
        <span class="c"># that the fourth paper is missing its citation record</span>
        <span class="n">wos_cite</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">parse_wos</span><span class="p">(</span><span class="s">&#39;./testin/wos_biblio_cite.txt&#39;</span><span class="p">)</span>
        <span class="n">doc_list_cite</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">wos2meta</span><span class="p">(</span><span class="n">wos_cite</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">missing_citations_zero</span> <span class="o">=</span>  <span class="n">nt</span><span class="o">.</span><span class="n">nx_biblio_coupling</span><span class="p">(</span><span class="n">doc_list_cite</span><span class="p">,</span>
                                                             <span class="s">&#39;ayjid&#39;</span><span class="p">,</span>
                                                             <span class="mi">0</span><span class="p">,</span>
                                                             <span class="s">&#39;ayjid&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">missing_citations_one</span> <span class="o">=</span>  <span class="n">nt</span><span class="o">.</span><span class="n">nx_biblio_coupling</span><span class="p">(</span><span class="n">doc_list_cite</span><span class="p">,</span>
                                                            <span class="s">&#39;ayjid&#39;</span><span class="p">,</span>
                                                            <span class="mi">1</span><span class="p">,</span>
                                                            <span class="s">&#39;ayjid&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestBiblioGraph.test_ayjid_zero"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestBiblioGraph.test_ayjid_zero">[docs]</a>    <span class="k">def</span> <span class="nf">test_ayjid_zero</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Every paper shares at least 0 references with every other</span>
<span class="sd">        paper. This makes a complete graph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># 4 papers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ayjid_zero</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>
        <span class="c"># 4 choose 2 = 6 edges </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_edges</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ayjid_zero</span><span class="p">),</span> <span class="mi">6</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestBiblioGraph.test_ayjid_one"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestBiblioGraph.test_ayjid_one">[docs]</a>    <span class="k">def</span> <span class="nf">test_ayjid_one</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        With threshold greater than 0, two papers must share at least 1</span>
<span class="sd">        reference in common. Test this when threshold is 1.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># 4 papers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ayjid_one</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>
        <span class="c"># first paper shares 2 &gt;= 1 references with second, 1 &gt;= 1 references</span>
        <span class="c"># with third, and the second and third share 1 &gt;= 1 references</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_edges</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ayjid_one</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestBiblioGraph.test_ayjid_two"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestBiblioGraph.test_ayjid_two">[docs]</a>    <span class="k">def</span> <span class="nf">test_ayjid_two</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        With threshold greater than 0, two papers must share at least 1</span>
<span class="sd">        reference in common. Test this when threshold is 2.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ayjid_two</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>
        <span class="c"># first paper shares 2 &gt;= 2 references with second</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_edges</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ayjid_two</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestBiblioGraph.test_attribs"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestBiblioGraph.test_attribs">[docs]</a>    <span class="k">def</span> <span class="nf">test_attribs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test the addition of four node attributes of different types:</span>
<span class="sd">            atitle - a string</span>
<span class="sd">            date - an int</span>
<span class="sd">            aulast - a list</span>
<span class="sd">            citations - a dictionary</span>
<span class="sd">        Presumably a double may be added to a network just as easily as an</span>
<span class="sd">        int, but we have no doubles to test in our standard meta_dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># paper 1 meta data</span>
        <span class="n">node1_atitle</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Marine ecosystem health status assessment&#39;</span> <span class="o">+</span> 
                        <span class="s">&#39; through integrative biomarker indices:&#39;</span> <span class="o">+</span> 
                        <span class="s">&#39; a comparative study after the Prestige oil&#39;</span> <span class="o">+</span> 
                        <span class="s">&#39; spill &quot;Mussel Watch&quot;&#39;</span><span class="p">)</span>
        <span class="n">node1_date</span> <span class="o">=</span> <span class="mi">2013</span>
        <span class="n">node1_aulast</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Marigomez&#39;</span><span class="p">,</span> <span class="s">&#39;Garmendia&#39;</span><span class="p">,</span> <span class="s">&#39;Soto&#39;</span><span class="p">,</span> <span class="s">&#39;Orbea&#39;</span><span class="p">,</span> 
                        <span class="s">&#39;Izagirre&#39;</span><span class="p">,</span> <span class="s">&#39;Cajaraville&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">node1_aulast</span><span class="p">)):</span>
            <span class="n">node1_aulast</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">node1_aulast</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">node1_cr_list</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;ADAMS SM, 1993, T AM FISH SOC, V122, P63, DOI&#39;</span> <span class="o">+</span> 
                          <span class="s">&#39; 10.1577/1548-8659(1993)122&lt;0063:AQHAIF&gt;2.3.CO;2&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s">&#39;Beliaeff B, 2002, ENVIRON TOXICOL CHEM, V21, &#39;</span> <span class="o">+</span> 
                          <span class="s">&#39;P1316, DOI 10.1897/1551-5028(2002)021&lt;1316:&#39;</span> <span class="o">+</span>
                          <span class="s">&#39;IBRAUT&gt;2.0.CO;2&#39;</span><span class="p">)]</span>
        <span class="n">node1_citations</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">cite</span> <span class="ow">in</span> <span class="n">node1_cr_list</span><span class="p">:</span>
            <span class="n">node1_citations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rd</span><span class="o">.</span><span class="n">parse_cr</span><span class="p">(</span><span class="n">cite</span><span class="p">))</span>
        <span class="n">node1_expected_attribs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;atitle&#39;</span><span class="p">:</span><span class="n">node1_atitle</span><span class="p">,</span>
                                  <span class="s">&#39;date&#39;</span><span class="p">:</span><span class="n">node1_date</span><span class="p">,</span>
                                  <span class="s">&#39;aulast&#39;</span><span class="p">:</span><span class="n">node1_aulast</span><span class="p">,</span>
                                  <span class="s">&#39;citations&#39;</span><span class="p">:</span><span class="n">node1_citations</span><span class="p">}</span>
        <span class="n">node1_ayjid</span> <span class="o">=</span> <span class="s">&#39;MARIGOMEZ I 2013 ECOTOXICOLOGY&#39;</span> 

        <span class="c"># paper 2 meta data</span>
        <span class="n">node2_atitle</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Evaluation of organic contamination in urban &#39;</span> <span class="o">+</span> 
                        <span class="s">&#39;groundwater surrounding a municipal landfill, &#39;</span> <span class="o">+</span> 
                        <span class="s">&#39;Zhoukou, China&#39;</span><span class="p">)</span>
        <span class="n">node2_date</span> <span class="o">=</span> <span class="mi">2013</span>
        <span class="n">node2_aulast</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Han&#39;</span><span class="p">,</span> <span class="s">&#39;Tong&#39;</span><span class="p">,</span> <span class="s">&#39;Jin&#39;</span><span class="p">,</span> <span class="s">&#39;Hepburn&#39;</span><span class="p">,</span> <span class="s">&#39;Tong&#39;</span><span class="p">,</span> <span class="s">&#39;Song&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">node2_aulast</span><span class="p">)):</span>
            <span class="n">node2_aulast</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">node2_aulast</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">node2_cr_list</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;ADAMS SM, 1993, T AM FISH SOC, V122, P63, &#39;</span> <span class="o">+</span> 
                          <span class="s">&#39;DOI 10.1577/1548-8659(1993)122&lt;0063:AQHAIF&gt;&#39;</span> <span class="o">+</span>
                          <span class="s">&#39;2.3.CO;2&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s">&#39;Beliaeff B, 2002, ENVIRON TOXICOL CHEM, V21, &#39;</span> <span class="o">+</span> 
                          <span class="s">&#39;P1316, DOI 10.1897/1551-5028(2002)021&lt;1316:&#39;</span> <span class="o">+</span> 
                          <span class="s">&#39;IBRAUT&gt;2.0.CO;2&#39;</span><span class="p">)]</span>
        <span class="n">node2_citations</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">cite</span> <span class="ow">in</span> <span class="n">node2_cr_list</span><span class="p">:</span>
            <span class="n">node2_citations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rd</span><span class="o">.</span><span class="n">parse_cr</span><span class="p">(</span><span class="n">cite</span><span class="p">))</span>
        <span class="n">node2_expected_attribs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;atitle&#39;</span><span class="p">:</span><span class="n">node2_atitle</span><span class="p">,</span>
                                  <span class="s">&#39;date&#39;</span><span class="p">:</span><span class="n">node2_date</span><span class="p">,</span>
                                  <span class="s">&#39;aulast&#39;</span><span class="p">:</span><span class="n">node2_aulast</span><span class="p">,</span>
                                  <span class="s">&#39;citations&#39;</span><span class="p">:</span><span class="n">node2_citations</span><span class="p">}</span>
        <span class="n">node2_ayjid</span> <span class="o">=</span> <span class="s">&#39;HAN D 2013 ENVIRONMENTAL MONITORING AND ASSESSMENT&#39;</span>

        <span class="c"># paper 3 meta data</span>
        <span class="n">node3_atitle</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Multilevel governance and management of shared &#39;</span> <span class="o">+</span> 
                        <span class="s">&#39;stocks with integrated markets: The European &#39;</span> <span class="o">+</span> 
                        <span class="s">&#39;anchovy case&#39;</span><span class="p">)</span>
        <span class="n">node3_date</span> <span class="o">=</span> <span class="mi">2013</span>
        <span class="n">node3_aulast</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Mulazzani&#39;</span><span class="p">,</span> <span class="s">&#39;Curtin&#39;</span><span class="p">,</span> <span class="s">&#39;Andres&#39;</span><span class="p">,</span> <span class="s">&#39;Malorgio&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">node3_aulast</span><span class="p">)):</span>
            <span class="n">node3_aulast</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">node3_aulast</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">node3_cr_list</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;AdriaMed, GEN OUTL MAR CAPT FI&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s">&#39;Beliaeff B, 2002, ENVIRON TOXICOL CHEM, V21, &#39;</span> <span class="o">+</span>
                          <span class="s">&#39;P1316, DOI 10.1897/1551-5028(2002)021&#39;</span> <span class="o">+</span> 
                          <span class="s">&#39;&lt;1316:IBRAUT&gt;2.0.CO;2&#39;</span><span class="p">)]</span>
        <span class="n">node3_citations</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">cite</span> <span class="ow">in</span> <span class="n">node3_cr_list</span><span class="p">:</span>
            <span class="n">node3_citations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rd</span><span class="o">.</span><span class="n">parse_cr</span><span class="p">(</span><span class="n">cite</span><span class="p">))</span>
        <span class="n">node3_expected_attribs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;atitle&#39;</span><span class="p">:</span><span class="n">node3_atitle</span><span class="p">,</span>
                                  <span class="s">&#39;date&#39;</span><span class="p">:</span><span class="n">node3_date</span><span class="p">,</span>
                                  <span class="s">&#39;aulast&#39;</span><span class="p">:</span><span class="n">node3_aulast</span><span class="p">,</span>
                                  <span class="s">&#39;citations&#39;</span><span class="p">:</span><span class="n">node3_citations</span><span class="p">}</span>
        <span class="n">node3_ayjid</span> <span class="o">=</span> <span class="s">&#39;MULAZZANI L 2013 MARINE POLICY&#39;</span>

        <span class="c"># paper 4 meta data</span>
        <span class="n">node4_atitle</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Application of multiple geochemical markers to &#39;</span> <span class="o">+</span> 
                        <span class="s">&#39;investigate organic pollution in a dynamic coastal &#39;</span> <span class="o">+</span> 
                        <span class="s">&#39;zone&#39;</span><span class="p">)</span>
        <span class="n">node4_date</span> <span class="o">=</span> <span class="mi">2013</span>
        <span class="n">node4_aulast</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Liu&#39;</span><span class="p">,</span> <span class="s">&#39;Wang&#39;</span><span class="p">,</span> <span class="s">&#39;Wong&#39;</span><span class="p">,</span> <span class="s">&#39;Qiu&#39;</span><span class="p">,</span> <span class="s">&#39;Zeng&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">node4_aulast</span><span class="p">)):</span>
            <span class="n">node4_aulast</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">node4_aulast</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">node4_cr_list</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;AIZENSHT.Z, 1973, GEOCHIM COSMOCHIM AC, V37, &#39;</span> <span class="o">+</span> 
                          <span class="s">&#39;P559, DOI 10.1016/0016-7037(73)90218-4&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s">&#39;BLUMER M, 1971, MAR BIOL, V8, P183, DOI &#39;</span> <span class="o">+</span> 
                          <span class="s">&#39;10.1007/BF00355214&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="s">&#39;Cachot J, 2007, ENVIRON SCI TECHNOL, V41, &#39;</span> <span class="o">+</span> 
                          <span class="s">&#39;P7830, DOI 10.1021/es071082v&#39;</span><span class="p">)]</span>
        <span class="n">node4_citations</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">cite</span> <span class="ow">in</span> <span class="n">node4_cr_list</span><span class="p">:</span>
            <span class="n">node4_citations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rd</span><span class="o">.</span><span class="n">parse_cr</span><span class="p">(</span><span class="n">cite</span><span class="p">))</span>
        <span class="n">node4_expected_attribs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;atitle&#39;</span><span class="p">:</span><span class="n">node4_atitle</span><span class="p">,</span>
                                  <span class="s">&#39;date&#39;</span><span class="p">:</span><span class="n">node4_date</span><span class="p">,</span>
                                  <span class="s">&#39;aulast&#39;</span><span class="p">:</span><span class="n">node4_aulast</span><span class="p">,</span>
                                  <span class="s">&#39;citations&#39;</span><span class="p">:</span><span class="n">node4_citations</span><span class="p">}</span>
        <span class="n">node4_ayjid</span> <span class="o">=</span> <span class="s">&#39;LIU L 2013 ENVIRONMENTAL TOXICOLOGY AND CHEMISTRY&#39;</span>

        <span class="c"># obtain node attributes from network and test them</span>
        <span class="n">node_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">node1_ayjid</span><span class="p">,</span> <span class="n">node2_ayjid</span><span class="p">,</span> <span class="n">node3_ayjid</span><span class="p">,</span> <span class="n">node4_ayjid</span><span class="p">]</span>
        <span class="n">attrib_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">node1_expected_attribs</span><span class="p">,</span> <span class="n">node2_expected_attribs</span><span class="p">,</span>
                       <span class="n">node3_expected_attribs</span><span class="p">,</span> <span class="n">node4_expected_attribs</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">node_list</span><span class="p">)):</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">node_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">expected_attribs</span> <span class="o">=</span> <span class="n">attrib_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">obtained_attribs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ayjid_attribs</span><span class="o">.</span><span class="n">node</span><span class="p">[</span><span class="n">node</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected_attribs</span><span class="p">,</span> <span class="n">obtained_attribs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestBiblioGraph.test_missing_citations_zero"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestBiblioGraph.test_missing_citations_zero">[docs]</a>    <span class="k">def</span> <span class="nf">test_missing_citations_zero</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        if fails network is not robust to papers missing citation data</span>
<span class="sd">        test for threshold = 0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># 4 papers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">missing_citations_zero</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>
        <span class="c"># 4 choose 2 = 6 edges </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_edges</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">missing_citations_zero</span><span class="p">),</span> <span class="mi">6</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="TestBiblioGraph.test_missing_citations_one"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestBiblioGraph.test_missing_citations_one">[docs]</a>    <span class="k">def</span> <span class="nf">test_missing_citations_one</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        if fails network is not robust to papers missing citation data</span>
<span class="sd">        test for threshold = 1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># 4 papers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">missing_citations_one</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>
        <span class="c"># first paper shares 2 &gt;= 1 references with second, 1 &gt;= 1 references</span>
        <span class="c"># with third, and the second and third share 1 &gt;= 1 references and</span>
        <span class="c"># fourth constructed to have no citations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_edges</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">missing_citations_one</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestBiblioGraph.tearDown"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestBiblioGraph.tearDown">[docs]</a>    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

</div></div>
<div class="viewcode-block" id="TestAuthorCouplingGraph"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestAuthorCouplingGraph">[docs]</a><span class="k">class</span> <span class="nc">TestAuthorCouplingGraph</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the author_coupling network</span>
<span class="sd">    Assumes reader is functioning</span>

<span class="sd">    the //testin/wos_author_coupling.txt file has been constructed with</span>
<span class="sd">    the following properties:</span>
<span class="sd">        the first paper shares 2 authors with the second and 1 with the third</span>
<span class="sd">        the second paper shares 1 author with the third</span>
<span class="sd">        the fourth paper shares 0 authors with any other paper</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="TestAuthorCouplingGraph.setUp"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestAuthorCouplingGraph.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># read data from docs folder</span>
        <span class="n">wos_data</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">parse_wos</span><span class="p">(</span><span class="s">&#39;./testin/wos_author_coupling.txt&#39;</span><span class="p">)</span>
        <span class="n">meta_list</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">wos2meta</span><span class="p">(</span><span class="n">wos_data</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ayjid_zero</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">nx_author_coupling</span><span class="p">(</span><span class="n">meta_list</span><span class="p">,</span>
                                                <span class="mi">0</span><span class="p">,</span>
                                                <span class="s">&#39;ayjid&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ayjid_one</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">nx_author_coupling</span><span class="p">(</span><span class="n">meta_list</span><span class="p">,</span>
                                               <span class="mi">1</span><span class="p">,</span>
                                               <span class="s">&#39;ayjid&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ayjid_two</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">nx_author_coupling</span><span class="p">(</span><span class="n">meta_list</span><span class="p">,</span>
                                               <span class="mi">2</span><span class="p">,</span>
                                               <span class="s">&#39;ayjid&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ayjid_attribs</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">nx_author_coupling</span><span class="p">(</span><span class="n">meta_list</span><span class="p">,</span>
                                                   <span class="mi">1</span><span class="p">,</span>
                                                   <span class="s">&#39;ayjid&#39;</span><span class="p">,</span>
                                                   <span class="s">&#39;atitle&#39;</span><span class="p">,</span>
                                                   <span class="s">&#39;date&#39;</span><span class="p">)</span></div>
<div class="viewcode-block" id="TestAuthorCouplingGraph.test_ayjid_zero"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestAuthorCouplingGraph.test_ayjid_zero">[docs]</a>    <span class="k">def</span> <span class="nf">test_ayjid_zero</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># with four papers there are 4 nodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ayjid_zero</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>

        <span class="c"># every paper shares at least 0 &gt;= 0 authors with other papers</span>
        <span class="c"># so we expect 4 choose 2 = 6 edges</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_edges</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ayjid_zero</span><span class="p">),</span> <span class="mi">6</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAuthorCouplingGraph.test_ayjid_one"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestAuthorCouplingGraph.test_ayjid_one">[docs]</a>    <span class="k">def</span> <span class="nf">test_ayjid_one</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># four nodes: one for each paper</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ayjid_one</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>

        <span class="c"># as noted in doc string, only papers 1 2 and 3 share one author</span>
        <span class="c"># among them; we expect 3 edges</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_edges</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ayjid_one</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span> 
</div>
<div class="viewcode-block" id="TestAuthorCouplingGraph.test_ayjid_two"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestAuthorCouplingGraph.test_ayjid_two">[docs]</a>    <span class="k">def</span> <span class="nf">test_ayjid_two</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># four nodes: one for each paper</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ayjid_two</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>

        <span class="c"># as noted in the doc string, one papers 1 and 2 share two authors</span>
        <span class="c"># we expect 1 edge</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">number_of_edges</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ayjid_two</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAuthorCouplingGraph.test_ayjid_attribs"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestAuthorCouplingGraph.test_ayjid_attribs">[docs]</a>    <span class="k">def</span> <span class="nf">test_ayjid_attribs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># paper 1 meta data</span>
        <span class="n">node1_atitle</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Marine ecosystem health status assessment&#39;</span> <span class="o">+</span> 
                        <span class="s">&#39;through integrative biomarker indices: a&#39;</span> <span class="o">+</span> 
                        <span class="s">&#39;comparative study after the Prestige oil&#39;</span> <span class="o">+</span> 
                        <span class="s">&#39;spill &quot;Mussel Watch&quot;&#39;</span><span class="p">)</span>
        <span class="n">node1_date</span> <span class="o">=</span> <span class="mi">2013</span>
        <span class="n">node1_expected_attribs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;atitle&#39;</span><span class="p">:</span><span class="n">node1_atitle</span><span class="p">,</span>
                                  <span class="s">&#39;date&#39;</span><span class="p">:</span><span class="n">node1_date</span><span class="p">}</span>
        <span class="n">node1_ayjid</span> <span class="o">=</span> <span class="s">&#39;MARIGOMEZ I 2013 ECOTOXICOLOGY&#39;</span>

        <span class="c"># paper 2 meta data</span>
        <span class="n">node2_atitle</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Evaluation of organic contamination in urban&#39;</span> <span class="o">+</span> 
                        <span class="s">&#39;groundwater surrounding a municipal landfill,&#39;</span> <span class="o">+</span> 
                        <span class="s">&#39;Zhoukou, China&#39;</span><span class="p">)</span>
        <span class="n">node2_date</span> <span class="o">=</span> <span class="mi">2013</span>
        <span class="n">node2_expected_attribs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;atitle&#39;</span><span class="p">:</span><span class="n">node2_atitle</span><span class="p">,</span>
                                  <span class="s">&#39;date&#39;</span><span class="p">:</span><span class="n">node2_date</span><span class="p">}</span>
        <span class="n">node2_ayjid</span> <span class="o">=</span> <span class="s">&#39;HAN D 2013 ENVIRONMENTAL MONITORING AND ASSESSMENT&#39;</span>

        <span class="c"># paper 3 meta data</span>
        <span class="n">node3_atitle</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Multilevel governance and management of shared&#39;</span> <span class="o">+</span> 
                        <span class="s">&#39;stocks with integrated markets: The European&#39;</span> <span class="o">+</span> 
                        <span class="s">&#39;anchovy case&#39;</span><span class="p">)</span>
        <span class="n">node3_date</span> <span class="o">=</span> <span class="mi">2013</span>
        <span class="n">node3_expected_attribs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;atitle&#39;</span><span class="p">:</span><span class="n">node3_atitle</span><span class="p">,</span>
                                  <span class="s">&#39;date&#39;</span><span class="p">:</span><span class="n">node3_date</span><span class="p">}</span>
        <span class="n">node3_ayjid</span> <span class="o">=</span> <span class="s">&#39;MULAZZANI L 2013 MARINE POLICY&#39;</span>

        <span class="c"># paper 4 meta data</span>
        <span class="n">node4_atitle</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Application of multiple geochemical markers to&#39;</span> <span class="o">+</span> 
                        <span class="s">&#39;investigate organic pollution in a dynamic coastal&#39;</span> <span class="o">+</span> 
                        <span class="s">&#39;zone&#39;</span><span class="p">)</span>
        <span class="n">node4_date</span> <span class="o">=</span> <span class="mi">2013</span>
        <span class="n">node4_expected_attribs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;atitle&#39;</span><span class="p">:</span><span class="n">node4_atitle</span><span class="p">,</span>
                                  <span class="s">&#39;date&#39;</span><span class="p">:</span><span class="n">node4_date</span><span class="p">}</span>
        <span class="n">node4_ayjid</span> <span class="o">=</span> <span class="s">&#39;LIU L 2013 ENVIRONMENTAL TOXICOLOGY AND CHEMISTRY&#39;</span>

        <span class="c"># test attribute expectations</span>
        <span class="n">node_id_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">node1_ayjid</span><span class="p">,</span> <span class="n">node2_ayjid</span><span class="p">,</span> <span class="n">node3_ayjid</span><span class="p">,</span> <span class="n">node4_ayjid</span><span class="p">]</span>
        <span class="n">node_attrib_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">node1_expected_attribs</span><span class="p">,</span> <span class="n">node2_expected_attribs</span><span class="p">,</span>
                            <span class="n">node3_expected_attribs</span><span class="p">,</span> <span class="n">node4_expected_attribs</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">node_id_list</span><span class="p">)):</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">node_id_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">obtained_attribs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ayjid_attribs</span><span class="o">.</span><span class="n">node</span><span class="p">[</span><span class="n">node</span><span class="p">]</span>
            <span class="n">expected_attribs</span> <span class="o">=</span> <span class="n">node_attrib_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertItemsEqual</span><span class="p">(</span><span class="n">expected_attribs</span><span class="p">,</span> <span class="n">obtained_attribs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAuthorCouplingGraph.tearDown"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestAuthorCouplingGraph.tearDown">[docs]</a>    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

</div></div>
<div class="viewcode-block" id="TestAuthorCocitation"><a class="viewcode-back" href="../../../tethne.testsuite.html#tethne.testsuite.networks_test.TestAuthorCocitation">[docs]</a><span class="k">class</span> <span class="nc">TestAuthorCocitation</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the author cocitation (analysis) network</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">tethne  documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Author.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>